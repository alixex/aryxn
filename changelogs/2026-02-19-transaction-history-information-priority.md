# 交易历史信息分级与紧凑布局设计

**日期**: 2026-02-19  
**状态**: 🟡 设计完成，待实施

## 背景

当前交易历史卡片承载信息较多（状态、类型、描述、时间、哈希、链路、恢复操作等），在侧栏/小区域中出现以下问题：

- 单条记录高度偏高，导致可见条目数量少
- 关键字段（状态、金额、时间）不够聚焦
- 异常操作（刷新/重试）与常规信息混排，阅读负担大

## 目标

在有限空间中优先展示“决策所需信息”，提升扫描效率与可操作性。

## 信息优先级

### P0（默认必显）

- 交易状态（PENDING / COMPLETED / FAILED）
- 类型（BRIDGE / SWAP / SEND）
- 金额与资产（amount + token）
- 时间（优先相对时间，保留绝对时间的可读性）

### P1（默认显示但弱化）

- 链路（fromChain → toChain）
- 简短哈希（前 6 + 后 4）
- 简化描述（单行截断）

### P2（按需显示）

- Explorer 外链
- 详细描述
- 恢复动作的扩展解释

## 布局策略

每条记录采用紧凑的“2 行主信息 + 条件操作区”：

1. 第 1 行：状态 + 类型 + 金额资产（左），时间（右）
2. 第 2 行：链路、短哈希、简述（弱化样式）
3. 条件操作区：仅在 PENDING/FAILED 且可操作时显示（刷新、重试、Claim、Speed Up）

## 交互策略

- 默认只展示关键字段，减少视觉噪音
- 长文本统一截断，避免撑高卡片
- 异常状态强化视觉（Pending/Failed）
- 对跨链 pending 保留状态刷新入口
- 对失败/卡住桥接保留恢复入口

## 实施清单

1. 重构 `TransactionHistory` 条目结构，切换为两行主信息布局
2. 补充金额主展示与链路弱化展示
3. 增加短哈希与相对时间展示
4. 保持现有刷新/恢复逻辑，仅调整挂载位置与视觉层级
5. 类型检查与格式校验

## 验收标准

- 同等高度下可见交易条数明显增加
- 用户可在 1 秒内识别：状态、金额、时间
- PENDING/FAILED 交易操作入口不丢失
- 不引入新的主题变量，不破坏现有 design token
